generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User{
  id        String     @id @default(uuid())
  username  String     @unique
  password  String
  name      String
  avatar    String?

  rooms Room[]
  shapes Shape[]
}

model Room{
  id        Int        @id @default(autoincrement())
  slug      String     @unique
  createdAt DateTime   @default(now())
  adminId   String

  admin     User      @relation(fields: [adminId] , references: [id] , onDelete: Cascade)
  shapes    Shape[]
}

model Shape{
  id        Int       @id @default(autoincrement())
  type      String    
  posX      Int
  posY      Int 
  data      String

  roomId    Int
  userId    String

  room      Room      @relation(fields: [roomId] , references: [id] , onDelete: Cascade)
  user      User      @relation(fields: [userId] , references: [id] , onDelete: Cascade)
}